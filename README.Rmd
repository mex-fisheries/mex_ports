---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

# A geospatial dataset of Mexican ports
[![DOI](https://zenodo.org/badge/DOI/10.5281/zenodo.15778575.svg)](https://doi.org/10.5281/zenodo.15778575)

By: Emma Zgonena, Renato Molina & Juan Carlos Villaseñor-Derbez

Cite as: Zgonena et al., 2025. A geospatial dataset of Mexican ports. DOI: [10.5281/zenodo.15778574](https://zenodo.org/records/15778575#:~:text=10.5281/zenodo.15778574)

```{r map, echo = FALSE, message = FALSE, warning = FALSE}
pacman::p_load(
  here,
  rnaturalearth,
  sf,
  tidyverse
)

mex_ports <- st_read(here("data/clean/mex_ports.gpkg"),
                     quiet = TRUE)
mex <- ne_countries(country = "Mexico")

ggplot(data = mex) +
  geom_sf() +
  geom_sf(data = mex_ports,
          mapping = aes(fill = !is.na(landing_site_id)),
          color = "black",
          shape = 21,
          size = 2,
          alpha = 0.7) +
  theme_minimal() +
  theme(legend.position = "inside",
        legend.position.inside = c(0.1, 0.2)) +
  scale_fill_brewer(palette = "Set1") +
  labs(title = "Mexican Ports",
       subtitle = "Colors indicate whether the port was matched to a CONAPESCA landing site",
       x = "Longitude",
       y = "Latitude",
       fill = "Matched")
```

## About

This repository is still in development. It will contain data and code to a geospatial dataset of the major ports of Mexico. It is intended to interface with other data in [mex_fisheries](https://github.com/jcvdav/mex_fisheries), such as vessel- and port-level landings information.

There are __ ports in the final data. 154 individual ports are identified in mexican_ports.csv, 4 of which are on lakes and therefore are not coastline ports. 
51 of the total ports in mexican_ports.csv can be matched to ports in mex_large_scale_landing_ports.csv, which is reflected in the mex_ports_dictionary.csv file. 17 ports found in mex_large_scale_landing_ports.csv cannot be accurately matched to mexican_ports.csv obtained from catastro.pdf.
Lake ports, ports without a matching port in both files, and repeats are filtered out in 03_combine_sources.R.


### How the data are built

The final data, mex_ports, is a culmination of information from the files mexian_ports.csv and mex_large_scale_landing_ports.csv that are correlated through mex_ports_dictionary.csv.

The information in mexican_ports.csv is obtained from the pdf titled catastro.pdf, which contains information on Mexican ports from the Mexican Secretaria de Comunicaciones y Transportes and the Departamento de Catastro, Instalaciones y Recintos. This information was extracted through copying and pasting it and later reorganized into new columns. 

- The inputs for 'port_id' are labeled as 'Clv. del puerto' in catastro.pdf. 
- The inputs for 'municipality_code' (renamed 'municipality_id' in final mex_ports cleaned data) and 'municipality_name' are found labeled together under 'Municipio' in catastro.pdf
- The inputs for 'port_name' are labeled as 'Nombre del Puerto' in catastro.pdf
- The inputs for 'longitude' and 'latitude' are labeled as 'Longitud' and 'Latutid' respectively in catastro.pdf

The information in mex_large_scale_landing_ports.csv is from Mexico’s fisheries production data and was also extracted through copy and pasting. 

Overlaps of ports in these two files were identified through the file mex_ports_dictionary.csv This file relates the ports that contained the same or very similar names (ex, a port in one data set omitted accents while the other did not). 

The final data, mex_ports, was created using the script titled 03_combine_sources.R. 

This script cleans and retains relevant columns from the dictionary, omitting lake ports 4 that are not relevant to the set. It then combines the objects through their corresponding landing_site_key. Finally, the data is standardized in name and made further accessible through the addition of tabular and geospatial file versions. 


### Column specifications

- `municipality_id` or `municipality_code`: numeric. 5-digit numeric code that acts as a unique identifier for each municipality. 
- municipality_name: text. Official name of municipality. 
- port_id: numeric. 5-digit numeric code that acts as a unique identifier for each port. 
- port_name: text. Official name of port. Originally labeled under ‘Nombre del Puerto’.
-  `landing_site_id` or `landing_site_key`: numeric. 

### Using the data

